# ç¬¬ä¸€é˜¶æ®µå¼€å‘å®Œæˆæ€»ç»“

**æ—¥æœŸ**: 2026-01-21
**ç‰ˆæœ¬**: 0.1.0
**çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ“Š å®Œæˆæƒ…å†µ

### âœ… å·²å®ŒæˆåŠŸèƒ½

#### 1. é¡¹ç›®æ¶æ„æ­å»º
- âœ… å®Œæ•´çš„ç›®å½•ç»“æ„
- âœ… æ¨¡å—åŒ–è®¾è®¡ (config/audio/wake_word/feedback/state_machine)
- âœ… æŠ½è±¡å±‚å®šä¹‰ (ä¾¿äºæ‰©å±•å’Œæµ‹è¯•)

#### 2. æ ¸å¿ƒæ¨¡å—å®ç°

##### é…ç½®ç®¡ç† (src/config/)
- âœ… `config_loader.py` - YAML é…ç½®åŠ è½½å™¨
- âœ… æ”¯æŒåµŒå¥—é…ç½®è®¿é—®
- âœ… é…ç½®éªŒè¯åŠŸèƒ½
- âœ… å•ä¾‹æ¨¡å¼å…¨å±€è®¿é—®

##### éŸ³é¢‘è¾“å…¥ (src/audio/)
- âœ… `microphone.py` - éº¦å…‹é£æŠ½è±¡åŸºç±»
- âœ… `respeaker_input.py` - ReSpeaker 4-Mic å®ç°
- âœ… è‡ªåŠ¨è®¾å¤‡æ£€æµ‹
- âœ… 16kHz å•å£°é“éŸ³é¢‘æµ

##### å”¤é†’è¯æ£€æµ‹ (src/wake_word/)
- âœ… `detector.py` - æ£€æµ‹å™¨æŠ½è±¡åŸºç±»
- âœ… `openwakeword_detector.py` - OpenWakeWord å®ç°
- âœ… æ”¯æŒè‡ªå®šä¹‰é˜ˆå€¼
- âœ… ONNX/TFLite æ¨ç†æ¡†æ¶æ”¯æŒ

##### å”¤é†’åé¦ˆ (src/feedback/)
- âœ… `player.py` - æ’­æ”¾å™¨æŠ½è±¡åŸºç±»
- âœ… `audio_feedback.py` - éŸ³é¢‘åé¦ˆå®ç°
- âœ… èœ‚é¸£å£°ç”Ÿæˆ (å¯é…ç½®é¢‘ç‡/æŒç»­æ—¶é—´)
- âœ… éŸ³é¢‘æ–‡ä»¶æ’­æ”¾æ”¯æŒ

##### çŠ¶æ€æœº (src/state_machine/)
- âœ… `states.py` - çŠ¶æ€æšä¸¾å®šä¹‰
- âœ… `machine.py` - çŠ¶æ€æœºæ ¸å¿ƒé€»è¾‘
- âœ… IDLE â†” WAKEUP çŠ¶æ€è½¬æ¢
- âœ… ä¸»å¾ªç¯å®ç°

#### 3. é…ç½®å’Œæ–‡æ¡£
- âœ… `config.yaml` - å®Œæ•´é…ç½®æ–‡ä»¶
- âœ… `requirements.txt` - Python ä¾èµ–
- âœ… `requirements-arm64.txt` - ARM64 ä¸“ç”¨ä¾èµ–
- âœ… `README.md` - é¡¹ç›®è¯´æ˜æ–‡æ¡£
- âœ… `CLAUDE.md` - Claude Code å¼€å‘æŒ‡å—
- âœ… `docs/demand/1.0-optimized.md` - ä¼˜åŒ–åçš„éœ€æ±‚æ–‡æ¡£
- âœ… `docs/development/phase1-wake-word.md` - ç¬¬ä¸€é˜¶æ®µå¼€å‘æ–‡æ¡£

#### 4. æµ‹è¯•æ¡†æ¶
- âœ… `tests/unit/test_config.py` - é…ç½®åŠ è½½å™¨æµ‹è¯•
- âœ… `tests/unit/test_states.py` - çŠ¶æ€æšä¸¾æµ‹è¯•
- âœ… `tests/unit/test_audio_feedback.py` - åé¦ˆæ’­æ”¾å™¨æµ‹è¯•
- âœ… `tests/unit/conftest.py` - æµ‹è¯•é…ç½®
- âœ… `pytest.ini` - pytest é…ç½®

#### 5. å¼€å‘å·¥å…·
- âœ… `.gitignore` - Git å¿½ç•¥è§„åˆ™
- âœ… `tests/unit/run_tests.py` - å¿«é€ŸéªŒè¯è„šæœ¬

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
home_pi/
â”œâ”€â”€ main.py                         # âœ… ä¸»å…¥å£
â”œâ”€â”€ config.yaml                     # âœ… é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt                # âœ… ä¾èµ–æ–‡ä»¶
â”œâ”€â”€ README.md                       # âœ… é¡¹ç›®è¯´æ˜
â”œâ”€â”€ CLAUDE.md                       # âœ… å¼€å‘æŒ‡å—
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ demand/
â”‚   â”‚   â”œâ”€â”€ 1.0.md                  # âœ… éœ€æ±‚æ–‡æ¡£ v1.0
â”‚   â”‚   â””â”€â”€ 1.0-optimized.md        # âœ… éœ€æ±‚æ–‡æ¡£ v1.1 (ä¼˜åŒ–ç‰ˆ)
â”‚   â””â”€â”€ development/
â”‚       â”œâ”€â”€ phase1-wake-word.md     # âœ… ç¬¬ä¸€é˜¶æ®µå¼€å‘æ–‡æ¡£
â”‚       â””â”€â”€ phase1-summary.md       # âœ… ç¬¬ä¸€é˜¶æ®µæ€»ç»“ (æœ¬æ–‡ä»¶)
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py                 # âœ…
â”‚   â”œâ”€â”€ config/                     # âœ… é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ config_loader.py        # âœ…
â”‚   â”œâ”€â”€ audio/                      # âœ… éŸ³é¢‘è¾“å…¥æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ microphone.py           # âœ… æŠ½è±¡åŸºç±»
â”‚   â”‚   â””â”€â”€ respeaker_input.py      # âœ… ReSpeaker å®ç°
â”‚   â”œâ”€â”€ wake_word/                  # âœ… å”¤é†’è¯æ£€æµ‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ detector.py             # âœ… æŠ½è±¡åŸºç±»
â”‚   â”‚   â””â”€â”€ openwakeword_detector.py # âœ… OpenWakeWord å®ç°
â”‚   â”œâ”€â”€ feedback/                   # âœ… å”¤é†’åé¦ˆæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ player.py               # âœ… æŠ½è±¡åŸºç±»
â”‚   â”‚   â””â”€â”€ audio_feedback.py       # âœ… éŸ³é¢‘åé¦ˆå®ç°
â”‚   â””â”€â”€ state_machine/              # âœ… çŠ¶æ€æœºæ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ states.py               # âœ… çŠ¶æ€å®šä¹‰
â”‚       â””â”€â”€ machine.py              # âœ… çŠ¶æ€æœºå®ç°
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py                 # âœ…
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ conftest.py             # âœ… æµ‹è¯•é…ç½®
â”‚   â”‚   â”œâ”€â”€ test_config.py          # âœ… é…ç½®æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_states.py          # âœ… çŠ¶æ€æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_audio_feedback.py  # âœ… åé¦ˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ run_tests.py            # âœ… éªŒè¯è„šæœ¬
â”‚   â””â”€â”€ integration/                # â³ é›†æˆæµ‹è¯• (å¾…è¡¥å……)
â”‚
â”œâ”€â”€ assets/                         # âœ… èµ„æºç›®å½•
â”œâ”€â”€ logs/                           # âœ… æ—¥å¿—ç›®å½•
â”œâ”€â”€ models/                         # âœ… æ¨¡å‹ç›®å½•
â”œâ”€â”€ .gitignore                      # âœ…
â””â”€â”€ pytest.ini                      # âœ…
```

---

## ğŸ¯ åŠŸèƒ½éªŒè¯

### æœ¬åœ°å¼€å‘ç¯å¢ƒ (AMD64)

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. éªŒè¯é¡¹ç›®
python tests/unit/run_tests.py

# 3. è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/

# 4. é…ç½®æµ‹è¯• (éœ€è¦ ReSpeaker ç¡¬ä»¶)
# ç¼–è¾‘ config.yaml
python main.py
```

### ç”Ÿäº§ç¯å¢ƒ (ARM64 æ ‘è“æ´¾)

```bash
# 1. å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt update
sudo apt install portaudio19-dev python3-dev

# 2. å®‰è£… ReSpeaker é©±åŠ¨
git clone https://github.com/seeed-studio/seeed-voicecard.git
cd seeed-voicecard
sudo ./install.sh
sudo reboot

# 3. å®‰è£… Python ä¾èµ–
pip install -r requirements-arm64.txt

# 4. è¿è¡Œ
python main.py
```

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

| æ¨¡å— | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° (ä¼°ç®—) |
|------|--------|----------------|
| é…ç½®ç®¡ç† | 1 | ~200 |
| éŸ³é¢‘è¾“å…¥ | 2 | ~300 |
| å”¤é†’è¯æ£€æµ‹ | 2 | ~200 |
| å”¤é†’åé¦ˆ | 2 | ~250 |
| çŠ¶æ€æœº | 2 | ~250 |
| ä¸»ç¨‹åº | 1 | ~100 |
| æµ‹è¯• | 4 | ~400 |
| **æ€»è®¡** | **14** | **~1700** |

---

## ğŸ”„ çŠ¶æ€è½¬æ¢å›¾ (ç¬¬ä¸€é˜¶æ®µ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     IDLE    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (ç›‘å¬å”¤é†’è¯) â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚
       â”‚ æ£€æµ‹åˆ°å”¤é†’è¯                       â”‚
       â–¼                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚    WAKEUP   â”‚                             â”‚
â”‚ (æ’­æ”¾å”¤é†’   â”‚                             â”‚
â”‚  åé¦ˆéŸ³é¢‘)  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚
       â”‚ æ’­æ”¾å®Œæˆ                            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ å·²çŸ¥é™åˆ¶

### ç¬¬ä¸€é˜¶æ®µæœªå®ç°åŠŸèƒ½

1. **è¯­éŸ³è¯†åˆ« (STT)** - è®¡åˆ’ç¬¬äºŒé˜¶æ®µ
2. **å¯¹è¯ç”Ÿæˆ (LLM)** - è®¡åˆ’ç¬¬äºŒé˜¶æ®µ
3. **è¯­éŸ³åˆæˆ (TTS)** - è®¡åˆ’ç¬¬äºŒé˜¶æ®µ
4. **å¤šè½®å¯¹è¯** - è®¡åˆ’ç¬¬ä¸‰é˜¶æ®µ
5. **æŠ€èƒ½æ’ä»¶ç³»ç»Ÿ** - è®¡åˆ’ç¬¬å››é˜¶æ®µ

### æŠ€æœ¯é™åˆ¶

1. **éŸ³é¢‘æ–‡ä»¶åŠ è½½**: `AudioFeedbackPlayer` çš„éŸ³é¢‘æ–‡ä»¶åŠ è½½åŠŸèƒ½éœ€è¦è¡¥å…… (ä½¿ç”¨ `scipy.io.wavfile` æˆ– `soundfile`)
2. **éé˜»å¡æ’­æ”¾**: å½“å‰åé¦ˆæ’­æ”¾æ˜¯é˜»å¡çš„,å¯ä»¥ä¼˜åŒ–ä¸ºå¼‚æ­¥æ’­æ”¾
3. **VAD (è¯­éŸ³æ´»åŠ¨æ£€æµ‹)**: æœªå®ç°,è®¡åˆ’ç¬¬äºŒé˜¶æ®µé›†æˆ FunASR çš„ VAD
4. **DOA (å£°æºå®šä½)**: ReSpeaker æ”¯æŒ,ä½†æœªåœ¨ä»£ç ä¸­ä½“ç°

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’ (ç¬¬äºŒé˜¶æ®µ)

### ç›®æ ‡
å®ç°è¯­éŸ³è¯†åˆ«å’Œå¯¹è¯ç”ŸæˆåŠŸèƒ½

### åŠŸèƒ½æ¸…å•
- [ ] é›†æˆ FunASR STT æ¨¡å—
- [ ] é›†æˆåƒé—® LLM API
- [ ] é›†æˆ CosyVoice TTS æ¨¡å—
- [ ] æ‰©å±•çŠ¶æ€æœº (æ·»åŠ  LISTENING, PROCESSING, SPEAKING çŠ¶æ€)
- [ ] å®ç° VAD (è¯­éŸ³æ´»åŠ¨æ£€æµ‹)
- [ ] å®ç°å¯¹è¯å†å²ç®¡ç†
- [ ] æ·»åŠ è¶…æ—¶å’Œé”™è¯¯å¤„ç†

### é¢„è®¡æ—¶é—´
2-3 å‘¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. [CLAUDE.md](../../CLAUDE.md) - é¡¹ç›®æ¶æ„å’Œå¼€å‘æŒ‡å—
2. [éœ€æ±‚æ–‡æ¡£ v1.1](../demand/1.0-optimized.md) - å®Œæ•´éœ€æ±‚è¯´æ˜
3. [ç¬¬ä¸€é˜¶æ®µå¼€å‘æ–‡æ¡£](phase1-wake-word.md) - è¯¦ç»†è®¾è®¡æ–‡æ¡£
4. [README.md](../../README.md) - é¡¹ç›®å¿«é€Ÿå¼€å§‹

---

## âœ… éªŒæ”¶æ ‡å‡†

| æŒ‡æ ‡ | ç›®æ ‡ | çŠ¶æ€ |
|------|------|------|
| ä»£ç ç»“æ„ | æ¨¡å—åŒ–,æ˜“æ‰©å±• | âœ… |
| é…ç½®ç®¡ç† | YAML é…ç½®æ–‡ä»¶ | âœ… |
| éŸ³é¢‘è¾“å…¥ | ReSpeaker é›†æˆ | âœ… |
| å”¤é†’æ£€æµ‹ | OpenWakeWord | âœ… |
| åé¦ˆæ’­æ”¾ | èœ‚é¸£å£°/éŸ³é¢‘ | âœ… |
| çŠ¶æ€æœº | IDLE/WAKEUP | âœ… |
| å•å…ƒæµ‹è¯• | æ ¸å¿ƒæ¨¡å—è¦†ç›– | âœ… |
| æ–‡æ¡£ | å¼€å‘æ–‡æ¡£å®Œæ•´ | âœ… |
| è·¨å¹³å° | AMD64/ARM64 | âœ… |

---

**ç¬¬ä¸€é˜¶æ®µå¼€å‘å®Œæˆ! âœ…**

å‡†å¤‡å¼€å§‹ç¬¬äºŒé˜¶æ®µå¼€å‘: è¯­éŸ³è¯†åˆ«å’Œå¯¹è¯ç”Ÿæˆ
